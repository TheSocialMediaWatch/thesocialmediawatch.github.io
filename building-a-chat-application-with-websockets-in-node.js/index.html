<!doctype html><html lang=en dir=auto><head><title>Building a Chat Application with WebSockets in Node.js</title>
<link rel=canonical href=https://various.googlexy.com/building-a-chat-application-with-websockets-in-node.js/><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><meta name=description content><meta name=author content><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://various.googlexy.com/logo.svg><link rel=icon type=image/png sizes=16x16 href=https://various.googlexy.com/logo.svg><link rel=icon type=image/png sizes=32x32 href=https://various.googlexy.com/logo.svg><link rel=apple-touch-icon href=https://various.googlexy.com/logo.svg><link rel=mask-icon href=https://various.googlexy.com/logo.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://various.googlexy.com/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="All the knowledge is here!"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://various.googlexy.com/"><meta name=twitter:card content="summary"><meta name=twitter:title content="All the knowledge is here!"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"All the knowledge is here!","url":"https://various.googlexy.com/","description":"","thumbnailUrl":"https://various.googlexy.com/logo.svg","sameAs":[]}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6194699946397512" crossorigin=anonymous></script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://various.googlexy.com/ accesskey=h title="Home (Alt + H)"><img src=https://various.googlexy.com/logo.svg alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://various.googlexy.com/articles/ title=Articles><span>Articles</span></a></li><li><a href=https://various.googlexy.com/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Building a Chat Application with WebSockets in Node.js</h1><div class=post-description></div></header><figure class=entry-cover><img loading=eager src=https://various.googlexy.com/images/programming.jpeg alt></figure><br><div class=post-content><p>Creating real-time applications has become a key aspect of modern web development. Whether for collaborative tools, live notifications, or chat apps, the need for instant communication between a client and server is essential. One of the most effective ways to handle such real-time communication is through WebSockets. In this comprehensive guide, we’ll build a fully functional chat application using WebSockets in Node.js. We’ll cover the basics, delve into server and client-side implementation, and explore best practices to make your chat app scalable and efficient.</p><hr><h2 id=understanding-websockets-and-their-role>Understanding WebSockets and Their Role</h2><p>WebSockets provide a full-duplex communication channel over a single TCP connection. Unlike the traditional HTTP request-response pattern where a client requests and a server responds, WebSockets enable persistent two-way communication. This means once a connection is established, data can flow freely in both directions without the overhead of opening new connections repeatedly.</p><p>In the context of chat applications, this real-time bidirectional flow shines. Messages sent by one user can be instantly pushed to all other connected users without latency or delays caused by polling techniques.</p><hr><h2 id=why-nodejs-for-real-time-chat>Why Node.js for Real-Time Chat?</h2><p>Node.js is an event-driven, non-blocking I/O runtime environment ideal for real-time applications. Its asynchronous nature makes it perfect for handling numerous simultaneous connections efficiently. Moreover, the rich ecosystem around Node.js includes libraries like <code>ws</code> and <code>socket.io</code> that simplify WebSocket implementations.</p><hr><h2 id=setting-up-your-development-environment>Setting up Your Development Environment</h2><p>To start building the chat application, ensure that you have the following installed:</p><ul><li><strong>Node.js</strong>: Version 14 or higher is recommended.</li><li><strong>npm</strong> (Node Package Manager): Comes bundled with Node.js.</li><li><strong>A modern web browser</strong> for testing the client-side interface.</li></ul><p>Begin by creating a new directory for your project and initializing it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir websocket-chat
</span></span><span class=line><span class=cl><span class=nb>cd</span> websocket-chat
</span></span><span class=line><span class=cl>npm init -y
</span></span></code></pre></div><p>This creates a <code>package.json</code> file which will manage your dependencies.</p><hr><h2 id=installing-dependencies>Installing Dependencies</h2><p>You need a couple of packages to build the app:</p><ul><li><strong>ws</strong>: A simple and fast WebSocket library for Node.js.</li><li><strong>express</strong>: To serve your web pages and manage HTTP routes.</li></ul><p>Install these using npm:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install ws express
</span></span></code></pre></div><hr><h2 id=building-the-websocket-server>Building the WebSocket Server</h2><p>Create a file called <code>server.js</code> at the root of the project directory. This will be the heart of your chat application.</p><h3 id=initializing-express-and-the-http-server>Initializing Express and the HTTP Server</h3><p>First, set up the Express server and integrate it with the HTTP module since <code>ws</code> requires an HTTP server to attach WebSockets to:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>http</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;http&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>WebSocket</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;ws&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Initialize Express
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>server</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>(</span><span class=nx>app</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Serve static files from public directory
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=kr>static</span><span class=p>(</span><span class=s1>&#39;public&#39;</span><span class=p>));</span>
</span></span></code></pre></div><p>This serves static assets that will be the client interface.</p><h3 id=creating-the-websocket-server>Creating the WebSocket Server</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>wss</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>WebSocket</span><span class=p>.</span><span class=nx>Server</span><span class=p>({</span> <span class=nx>server</span> <span class=p>});</span>
</span></span></code></pre></div><p>Here we create a WebSocket server (<code>wss</code>) attached to the HTTP server.</p><h3 id=handling-connections-and-messages>Handling Connections and Messages</h3><p>With WebSocket server set up, you can manage how connections and incoming messages behave:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>wss</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;connection&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>ws</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;A new client connected.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>ws</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;message&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>message</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Received: </span><span class=si>${</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Broadcast message to all other connected clients
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>wss</span><span class=p>.</span><span class=nx>clients</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>client</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>client</span> <span class=o>!==</span> <span class=nx>ws</span> <span class=o>&amp;&amp;</span> <span class=nx>client</span><span class=p>.</span><span class=nx>readyState</span> <span class=o>===</span> <span class=nx>WebSocket</span><span class=p>.</span><span class=nx>OPEN</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>client</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=nx>message</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>ws</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;close&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Client disconnected.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>Each time a client connects, it logs the connection. When a message is received from a client, it broadcasts the message to all other connected clients.</p><h3 id=starting-the-server>Starting the Server</h3><p>Finally, make the server listen on a port:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>PORT</span> <span class=o>=</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>PORT</span> <span class=o>||</span> <span class=mi>3000</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>server</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=nx>PORT</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Server running on port </span><span class=si>${</span><span class=nx>PORT</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><hr><h2 id=designing-the-client-interface>Designing the Client Interface</h2><p>Create a new directory named <code>public</code> in your project root. Inside it, create an <code>index.html</code> file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;!DOCTYPE html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;en&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;UTF-8&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;viewport&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;width=device-width, initial-scale=1&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>WebSocket Chat App<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>body</span> <span class=p>{</span> <span class=k>font-family</span><span class=p>:</span> <span class=n>Arial</span><span class=p>,</span> <span class=kc>sans-serif</span><span class=p>;</span> <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span> <span class=k>padding</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span> <span class=k>background</span><span class=p>:</span> <span class=mh>#f4f4f9</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>#</span><span class=nn>chat</span> <span class=p>{</span> <span class=k>width</span><span class=p>:</span> <span class=mi>90</span><span class=kt>%</span><span class=p>;</span> <span class=k>max-width</span><span class=p>:</span> <span class=mi>800</span><span class=kt>px</span><span class=p>;</span> <span class=k>margin</span><span class=p>:</span> <span class=mi>20</span><span class=kt>px</span> <span class=kc>auto</span><span class=p>;</span> <span class=k>background</span><span class=p>:</span> <span class=mh>#fff</span><span class=p>;</span> <span class=k>border-radius</span><span class=p>:</span> <span class=mi>8</span><span class=kt>px</span><span class=p>;</span> <span class=k>padding</span><span class=p>:</span> <span class=mi>10</span><span class=kt>px</span><span class=p>;</span> <span class=k>box-shadow</span><span class=p>:</span> <span class=mi>0</span> <span class=mi>2</span><span class=kt>px</span> <span class=mi>5</span><span class=kt>px</span> <span class=nb>rgba</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mf>0.1</span><span class=p>);}</span>
</span></span><span class=line><span class=cl>  <span class=p>#</span><span class=nn>messages</span> <span class=p>{</span> <span class=k>height</span><span class=p>:</span> <span class=mi>400</span><span class=kt>px</span><span class=p>;</span> <span class=k>overflow-y</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span> <span class=k>border</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span> <span class=kc>solid</span> <span class=mh>#ddd</span><span class=p>;</span> <span class=k>padding</span><span class=p>:</span> <span class=mi>10</span><span class=kt>px</span><span class=p>;</span> <span class=k>margin-bottom</span><span class=p>:</span> <span class=mi>15</span><span class=kt>px</span><span class=p>;</span> <span class=k>border-radius</span><span class=p>:</span> <span class=mi>4</span><span class=kt>px</span><span class=p>;</span> <span class=k>background</span><span class=p>:</span> <span class=mh>#fafafa</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>#</span><span class=nn>messages</span> <span class=nt>div</span> <span class=p>{</span> <span class=k>padding</span><span class=p>:</span> <span class=mi>5</span><span class=kt>px</span> <span class=mi>0</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>#</span><span class=nn>inputArea</span> <span class=p>{</span> <span class=k>display</span><span class=p>:</span> <span class=kc>flex</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>#</span><span class=nn>inputArea</span> <span class=nt>input</span> <span class=p>{</span> <span class=k>flex</span><span class=p>:</span> <span class=mi>1</span><span class=p>;</span> <span class=k>padding</span><span class=p>:</span> <span class=mi>10</span><span class=kt>px</span><span class=p>;</span> <span class=k>border-radius</span><span class=p>:</span> <span class=mi>4</span><span class=kt>px</span><span class=p>;</span> <span class=k>border</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span> <span class=kc>solid</span> <span class=mh>#ccc</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>#</span><span class=nn>inputArea</span> <span class=nt>button</span> <span class=p>{</span> <span class=k>padding</span><span class=p>:</span> <span class=mi>10</span><span class=kt>px</span> <span class=mi>20</span><span class=kt>px</span><span class=p>;</span> <span class=k>background</span><span class=p>:</span> <span class=mh>#007bff</span><span class=p>;</span> <span class=k>color</span><span class=p>:</span> <span class=kc>white</span><span class=p>;</span> <span class=k>border</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span> <span class=k>border-radius</span><span class=p>:</span> <span class=mi>4</span><span class=kt>px</span><span class=p>;</span> <span class=k>margin-left</span><span class=p>:</span> <span class=mi>10</span><span class=kt>px</span><span class=p>;</span> <span class=k>cursor</span><span class=p>:</span> <span class=kc>pointer</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>#</span><span class=nn>inputArea</span> <span class=nt>button</span><span class=p>:</span><span class=nd>hover</span> <span class=p>{</span> <span class=k>background</span><span class=p>:</span> <span class=mh>#0056b3</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;chat&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;messages&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;inputArea&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;messageInput&#34;</span> <span class=na>placeholder</span><span class=o>=</span><span class=s>&#34;Type your message here...&#34;</span> <span class=na>autocomplete</span><span class=o>=</span><span class=s>&#34;off&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>button</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;sendButton&#34;</span><span class=p>&gt;</span>Send<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;client.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>This lightweight interface displays a message area and input to send messages.</p><hr><h2 id=adding-client-side-websocket-logic>Adding Client-side WebSocket Logic</h2><p>Create a file named <code>client.js</code> in the <code>public</code> folder:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ws</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>WebSocket</span><span class=p>(</span><span class=sb>`ws://</span><span class=si>${</span><span class=nb>window</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>host</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>messagesDiv</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;messages&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>messageInput</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;messageInput&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>sendButton</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;sendButton&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Append messages to the chat window
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>appendMessage</span><span class=p>(</span><span class=nx>message</span><span class=p>,</span> <span class=nx>isOwnMessage</span> <span class=o>=</span> <span class=kc>false</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>div</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;div&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>div</span><span class=p>.</span><span class=nx>textContent</span> <span class=o>=</span> <span class=nx>message</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>div</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=nx>isOwnMessage</span> <span class=o>?</span> <span class=s1>&#39;#007bff&#39;</span> <span class=o>:</span> <span class=s1>&#39;#000&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>messagesDiv</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>div</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>messagesDiv</span><span class=p>.</span><span class=nx>scrollTop</span> <span class=o>=</span> <span class=nx>messagesDiv</span><span class=p>.</span><span class=nx>scrollHeight</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Send message function
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>sendMessage</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>message</span> <span class=o>=</span> <span class=nx>messageInput</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>trim</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>message</span> <span class=o>!==</span> <span class=s1>&#39;&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ws</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=nx>message</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>appendMessage</span><span class=p>(</span><span class=sb>`You: </span><span class=si>${</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>messageInput</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// WebSocket connected
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>ws</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;open&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>appendMessage</span><span class=p>(</span><span class=s1>&#39;Connected to the server.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Listen for messages from server
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>ws</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;message&#39;</span><span class=p>,</span> <span class=p>({</span> <span class=nx>data</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>appendMessage</span><span class=p>(</span><span class=sb>`Friend: </span><span class=si>${</span><span class=nx>data</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Handle connection close
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>ws</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;close&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>appendMessage</span><span class=p>(</span><span class=s1>&#39;Disconnected from the server.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Send button click event
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>sendButton</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;click&#39;</span><span class=p>,</span> <span class=nx>sendMessage</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Allow enter key to send messages
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>messageInput</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;keypress&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>key</span> <span class=o>===</span> <span class=s1>&#39;Enter&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>sendMessage</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>This script establishes a WebSocket connection, updates the chat display, and manages user input.</p><hr><h2 id=running-the-application>Running the Application</h2><p>With everything set up, start your server:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>node server.js
</span></span></code></pre></div><p>Open your browser and navigate to <code>http://localhost:3000</code>. Open multiple tabs or browsers and try sending messages. Each message sent from one client should appear almost instantly on all others.</p><hr><h2 id=exploring-advanced-features>Exploring Advanced Features</h2><p>Once the basic chat app is working, consider improving it with:</p><h3 id=1-user-identification>1. User Identification</h3><p>Right now, all messages are anonymous. Add username inputs and prepend usernames to outgoing messages to personalize communication.</p><h3 id=2-message-format-and-validation>2. Message Format and Validation</h3><p>Use JSON objects instead of raw strings. This allows sending metadata like timestamps, user IDs, or message types.</p><h4 id=example>Example:</h4><p>On the client:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>messageObj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>user</span><span class=o>:</span> <span class=nx>username</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>content</span><span class=o>:</span> <span class=nx>messageInput</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>timestamp</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>ws</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>messageObj</span><span class=p>));</span>
</span></span></code></pre></div><p>On the server, parse incoming messages:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>ws</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;message&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>data</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>parsed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>parsed</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Invalid JSON:&#39;</span><span class=p>,</span> <span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Broadcast parsed message as stringified JSON
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>wss</span><span class=p>.</span><span class=nx>clients</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>client</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>client</span><span class=p>.</span><span class=nx>readyState</span> <span class=o>===</span> <span class=nx>WebSocket</span><span class=p>.</span><span class=nx>OPEN</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>client</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>parsed</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><h3 id=3-persistence-with-databases>3. Persistence with Databases</h3><p>Integrate a database like MongoDB or PostgreSQL to store message history. This enables users to load past conversations on reconnect.</p><h3 id=4-typing-indicators>4. Typing Indicators</h3><p>Implement typing notifications to show when a user is composing a message.</p><h3 id=5-private-messaging>5. Private Messaging</h3><p>Add direct messaging functionality to enable conversations between two users exclusively.</p><hr><h2 id=security-considerations>Security Considerations</h2><ul><li><strong>Sanitize Inputs:</strong> Prevent cross-site scripting (XSS) by sanitizing messages before rendering on the client.</li><li><strong>Authentication:</strong> Tie WebSocket connections to authenticated sessions to restrict chat access.</li><li><strong>Transport Layer Security:</strong> Use secure WebSockets (wss://) to encrypt traffic, especially in production environments.</li><li><strong>Rate Limiting:</strong> Prevent spam or denial of service by limiting message frequency per client.</li></ul><hr><h2 id=deploying-your-chat-application>Deploying Your Chat Application</h2><p>To deploy a Node.js app with WebSockets:</p><ul><li>Consider <strong>Heroku</strong>, <strong>DigitalOcean</strong>, <strong>AWS</strong>, or <strong>Vercel</strong> as hosting services.</li><li>Set environment variables such as <code>PORT</code>.</li><li>Ensure your WebSocket server works behind proxies by enabling WebSocket support.</li><li>Use SSL certificates to enable secure WebSocket connections.</li></ul><hr><h2 id=conclusion>Conclusion</h2><p>Building a real-time chat application with WebSockets in Node.js is a rewarding project that illuminates the power of persistent, bidirectional connections. You’ve seen how a simple server can manage multiple client connections, broadcast messages, and create an interactive experience. From here, you can add user authentication, message storage, and sophisticated UI/UX to build a production-ready chat platform.</p><p>This groundwork also applies to various real-time applications beyond chat, such as collaborative editing, multiplayer games, and live monitoring dashboards. The skills honed here will elevate your ability to craft responsive, engaging web experiences at scale.</p><p>Happy coding!</p></div><footer class=post-footer><nav class=paginav>Category:<a href=https://various.googlexy.com/categories/programming/>Programming</a></nav><nav class=paginav><a class=prev href=https://various.googlexy.com/breaking-the-barrier-learning-to-code-as-an-adult/><span class=title>« Prev</span><br><span>Breaking the Barrier: Learning to Code as an Adult</span>
</a><a class=next href=https://various.googlexy.com/building-a-real-time-chat-application-with-react-and-firebase/><span class=title>Next »</span><br><span>Building a Real-Time Chat Application with React and Firebase</span></a></nav><nav class=paginav><ul style=list-style-type:none><li><small>See Also</small></li><li><ul style=list-style-type:none><li><small><a href=/building-responsive-web-design-optimizing-for-different-devices/>Building Responsive Web Design: Optimizing for Different Devices</a></small></li><li><small><a href=/the-power-of-natural-language-processing-nlp-libraries-nltk-vs.-spacy/>The Power of Natural Language Processing (NLP) Libraries: NLTK vs. SpaCy</a></small></li><li><small><a href=/kotlin-programming-building-modern-concise-and-safe-code/>Kotlin Programming: Building Modern, Concise, and Safe Code</a></small></li><li><small><a href=/the-basics-of-html-and-css-building-blocks-of-web-development/>The Basics of HTML and CSS: Building Blocks of Web Development</a></small></li><li><small><a href=/the-power-of-continuous-integration-and-continuous-deployment/>The Power of Continuous Integration and Continuous Deployment</a></small></li></ul></li></ul></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://various.googlexy.com/>All the knowledge is here!</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>